# REMARKS, HINTS and WITTICISMS

# OBFUSCATION AND HINTS

There's very little in the way of direct obfuscation (well, very little
to those not used to the IOCCC), instead it relies on the fact that what
it is emulating is deceptively simple and difficult to reason about, even
if you know what it is doing. In fact I have decided against applying
more obfuscation to make the algorithm used fairly clear.

	short s[1<<16]={u},b,l,e;main(q){
	for(;~e;){
	q=s[b=s[e++]],l=s[e],e+=2;
	~b?~l?e=(s[l]-=q)>0?e:s[e-1]:putchar(q):(s[l]=getchar());
	}}

Some might say it was quite the ultimate risc submitting a one-liner
in which such a large program was specified in the Makefile.

There are a few ways of shortening this already short entry, "getchar"
can be replaced with "read(0,s+l,1)" however that both changes the
behavior (CTRL+D no long working) and introduces a portability problem.

"short" can also be removed, for the price of a few more warnings, 
which will be talked about later.

# BUILD

To build:

	make

Alternatively:

	cc -Du="0,0,-1" prog.c -o prog
	cc -Du="9,-1,3,10,-1,6,0,0,-1,72,105" prog.c -o prog
	cc -Du="0,0,127,11,1828,128,-1,1,16,64,0,0,0,0,0,0,12210,32256,-1039,0,0,0,0,0,0,0,0,56,12192,12156,11026,11882,5790,12192,0,1,50,0,0,32384,32384,32512,32512,69,114,114,111,114,58,32,78,111,116,32,97,32,49,54,45,98,105,116,32,83,85,66,76,69,81,32,86,77,13,10,-1,43,11,11,79,75,0,82,0,11,85,0,0,88,103,103,91,11,0,94,0,103,97,0,0,100,12,12,103,0,0,106,0,12,109,0,0,112,6,11,115,0,12,124,12,-1,121,0,0,88,0,0,-1,11,11,130,6,11,133,12,12,136,6,12,139,11,0,142,0,11,145,0,0,148,6,12,151,13,13,154,12,0,157,0,13,160,0,0,163,9,13,166,0,13,172,0,0,76,0,11,178,0,0,139,8,12,181,12,0,187,0,0,193,0,0,190,0,12,196,0,0,76,42,42,199,41,0,202,0,42,205,0,0,208,40,40,211,39,0,214,0,40,217,0,0,220,37,37,223,32,0,226,0,37,229,0,0,232,247,247,235,37,0,238,0,247,241,0,0,244,11,11,247,0,0,250,0,11,253,0,0,256,6,37,259,12,12,262,4,0,265,0,12,268,0,0,271,11,12,274,0,12,292,291,291,280,11,0,283,0,291,286,0,0,289,0,0,292,6,40,295,40,0,298,310,310,301,311,311,304,0,310,307,0,311,310,0,0,313,37,1,316,323,323,319,0,323,322,1,0,325,0,0,328,1,1,331,37,37,334,11,0,337,0,37,340,0,0,343,0,0,232,11,11,349,38,0,352,0,11,355,0,0,358,373,373,361,42,0,364,0,373,367,0,0,370,38,38,373,0,0,376,0,38,379,0,0,382,42,0,385,397,397,388,398,398,391,0,397,394,0,398,397,0,0,400,11,1,403,410,410,406,0,410,409,1,0,412,0,0,415,1,1,418,0,0,232,7,42,424,42,0,427,439,439,430,440,440,433,0,439,436,0,440,439,0,0,442,38,1,445,452,452,448,0,452,451,1,0,454,0,0,457,1,1,460,0,0,232,7,42,466,42,0,469,481,481,472,482,482,475,0,481,478,0,482,481,0,0,484,38,1,487,494,494,490,0,494,493,1,0,496,0,0,499,1,1,502,517,517,505,40,0,508,0,517,511,0,0,514,38,38,517,0,0,520,0,38,523,0,0,526,7,40,529,0,0,232,6,40,535,40,0,538,550,550,541,551,551,544,0,550,547,0,551,550,0,0,553,38,1,556,563,563,559,0,563,562,1,0,565,0,0,568,1,1,571,586,586,574,42,0,577,0,586,580,0,0,583,38,38,586,0,0,589,0,38,592,0,0,595,6,42,598,0,0,232,616,616,604,38,0,607,0,616,610,0,0,613,38,38,616,0,0,619,0,38,622,0,0,625,0,0,232,643,643,631,42,0,634,0,643,637,0,0,640,11,11,643,0,0,646,0,11,649,0,0,652,38,0,655,667,667,658,668,668,661,0,667,664,0,668,667,0,0,670,11,1,673,680,680,676,0,680,679,1,0,682,0,0,685,1,1,688,6,42,691,0,0,571,38,-1,697,0,0,571,715,715,703,40,0,706,0,715,709,0,0,712,37,37,715,0,0,718,0,37,721,0,0,724,7,40,727,0,0,232,6,37,733,0,0,232,11,11,739,38,0,742,0,11,745,0,0,748,763,763,751,42,0,754,0,763,757,0,0,760,38,38,763,0,0,766,0,38,769,0,0,772,6,42,775,11,0,781,0,0,787,0,0,784,0,11,790,0,0,730,7,11,793,0,11,799,0,0,730,814,814,802,37,0,805,0,814,808,0,0,811,37,37,814,0,0,817,0,37,820,0,0,823,0,0,232,841,841,829,40,0,832,0,841,835,0,0,838,11,11,841,0,0,844,0,11,847,0,0,850,0,11,895,7,11,856,40,0,859,871,871,862,872,872,865,0,871,868,0,872,871,0,0,874,11,1,877,884,884,880,0,884,883,1,0,886,0,0,889,1,1,892,0,0,799,7,40,898,0,0,730,38,0,907,0,0,913,0,0,910,0,38,919,38,38,916,0,0,937,7,38,922,0,38,931,38,38,928,0,0,937,38,38,934,7,38,937,0,0,232,0,38,946,38,38,232,38,38,949,6,38,952,0,0,232,42,0,958,965,965,961,0,965,964,38,0,967,0,0,970,0,0,571,42,0,976,38,1,979,986,986,982,0,986,985,1,0,988,0,0,991,1,1,994,0,0,571,11,11,1000,8,0,1003,0,11,1006,0,0,1009,38,11,1012,1027,1027,1015,42,0,1018,0,1027,1021,0,0,1024,38,38,1027,0,0,1030,0,38,1033,0,0,1036,6,42,1039,12,12,1042,12,0,1045,0,12,1048,0,0,1051,38,0,1057,0,0,1060,0,0,1066,6,12,1063,0,0,1093,13,13,1069,38,0,1072,0,13,1075,0,0,1078,6,13,1081,13,0,1087,0,0,1090,0,0,1093,6,12,1093,38,0,1096,0,38,1099,0,0,1102,7,11,1105,0,11,1111,0,0,1042,38,38,1114,12,0,1117,0,38,1120,0,0,1123,0,0,232,11,11,1129,8,0,1132,0,11,1135,0,0,1138,12,12,1141,1156,1156,1144,42,0,1147,0,1156,1150,0,0,1153,14,14,1156,0,0,1159,0,14,1162,0,0,1165,6,42,1168,1183,1183,1171,42,0,1174,0,1183,1177,0,0,1180,15,15,1183,0,0,1186,0,15,1189,0,0,1192,6,42,1195,12,0,1198,0,12,1201,0,0,1204,38,0,1210,0,0,1213,0,0,1228,13,13,1216,15,0,1219,0,13,1222,0,0,1225,0,0,1270,13,13,1231,38,0,1234,0,13,1237,0,0,1240,6,13,1243,13,0,1249,0,0,1252,0,0,1258,0,0,1213,0,0,1270,13,13,1261,14,0,1264,0,13,1267,0,0,1270,13,0,1276,0,0,1279,0,0,1285,6,12,1282,0,0,1300,6,13,1288,13,0,1294,0,0,1297,0,0,1300,6,12,1300,38,0,1303,0,38,1306,0,0,1309,14,0,1312,0,14,1315,0,0,1318,15,0,1321,0,15,1324,0,0,1327,7,11,1330,0,11,1336,0,0,1195,38,38,1339,12,0,1342,0,38,1345,0,0,1348,0,0,232,1366,1366,1354,42,0,1357,0,1366,1360,0,0,1363,11,11,1366,0,0,1369,0,11,1372,0,0,1375,12,12,1378,6,12,1381,38,11,1384,11,0,1390,0,0,1393,0,0,1456,38,0,1396,0,11,1399,0,0,1402,7,12,1405,38,38,1408,12,0,1411,0,38,1414,0,0,1417,42,0,1420,1432,1432,1423,1433,1433,1426,0,1432,1429,0,1433,1432,0,0,1435,11,1,1438,1445,1445,1441,0,1445,1444,1,0,1447,0,0,1450,1,1,1453,0,0,232,0,0,1378,0,35,1465,0,0,232,1480,1480,1468,17,0,1471,0,1480,1474,0,0,1477,11,11,1480,0,0,1483,0,11,1486,0,0,1489,0,11,1825,6,34,1495,12,12,1498,17,0,1501,0,12,1504,0,0,1507,6,12,1510,12,0,1513,1525,1525,1516,1526,1526,1519,0,1525,1522,0,1526,1525,0,0,1528,37,1,1531,1538,1538,1534,0,1538,1537,1,0,1540,0,0,1543,1,1,1546,6,12,1549,12,0,1552,1564,1564,1555,1565,1565,1558,0,1564,1561,0,1565,1564,0,0,1567,38,1,1570,1577,1577,1573,0,1577,1576,1,0,1579,0,0,1582,1,1,1585,6,12,1588,12,0,1591,1603,1603,1594,1604,1604,1597,0,1603,1600,0,1604,1603,0,0,1606,40,1,1609,1616,1616,1612,0,1616,1615,1,0,1618,0,0,1621,1,1,1624,6,12,1627,12,0,1630,1642,1642,1633,1643,1643,1636,0,1642,1639,0,1643,1642,0,0,1645,42,1,1648,1655,1655,1651,0,1655,1654,1,0,1657,0,0,1660,1,1,1663,39,39,1666,11,0,1669,0,39,1672,0,0,1675,5,0,1678,0,39,1681,0,0,1684,41,41,1687,39,0,1690,0,41,1693,0,0,1696,5,0,1699,0,41,1702,0,0,1705,17,17,1708,11,0,1711,0,17,1714,0,0,1717,6,11,1720,1735,1735,1723,11,0,1726,0,1735,1729,0,0,1732,37,37,1735,0,0,1738,0,37,1741,0,0,1744,6,11,1747,1762,1762,1750,11,0,1753,0,1762,1756,0,0,1759,38,38,1762,0,0,1765,0,38,1768,0,0,1771,6,11,1774,1789,1789,1777,11,0,1780,0,1789,1783,0,0,1786,40,40,1789,0,0,1792,0,40,1795,0,0,1798,6,11,1801,1816,1816,1804,11,0,1807,0,1816,1810,0,0,1813,42,42,1816,0,0,1819,0,42,1822,0,0,1825,0,0,232,0,11009,973,700,3656,11521,955,700,3664,25091,25977,124,700,3672,25603,28789,421,700,3682,25604,28530,112,571,700,3692,29444,24951,112,346,700,3704,29190,26739,26217,116,997,700,0,23299,23872,601,700,3730,23299,23841,628,700,3716,12290,61,901,700,3740,27652,29029,48,940,700,3760,27907,30837,1126,700,3772,28677,30049,25971,1459,700,3750,12802,42,421,973,700,3782,10279,28515,29550,10612,463,601,700,3806,8962,48,1908,0,3822,8962,49,1908,1,3832,8963,12589,1908,-1,3842,8962,50,1908,2,3852,11525,25955,27756,1908,-2,3794,12546,43,1919,973,700,3874,12546,45,1919,955,700,3862,10246,30064,26739,41,463,421,601,346,1940,532,700,3898,10276,28789,41,463,421,601,1954,17,601,1900,973,346,1940,532,700,3922,10277,24950,10610,463,1900,700,3954,10278,29557,29285,41,463,601,1954,17,601,1900,973,700,3886,10561,700,3994,28420,25974,114,346,421,532,346,463,700,4000,26886,30318,29285,116,1924,346,955,700,4020,30723,29295,532,421,2015,346,463,1126,700,4038,28418,114,2004,1126,700,4058,24835,25710,1914,346,1126,700,4070,12802,47,1919,997,700,4084,16385,2045,601,700,4096,8449,2045,628,700,3968,16386,43,421,2050,700,4106,15364,27503,62,1989,20,4116,15366,28005,29801,62,1989,22,4140,15365,25963,15993,1989,24,4154,15366,25445,28520,62,1989,26,4166,15369,26988,25972,24946,15980,1989,28,4180,15365,24948,15984,1989,30,4196,15368,30821,25968,29795,62,1989,32,4208,15367,29285,28530,15986,1989,34,4224,15366,28515,25708,62,1954,64,700,4128,25351,29301,25970,29806,1954,54,700,4254,29192,28527,11636,28534,99,1954,60,700,4270,29700,26984,115,1965,0,700,4288,28675,25697,2148,1954,960,973,700,4302,8965,28534,29539,1908,8,4318,25351,28271,25972,29816,1954,38,700,4330,25091,27500,1981,0,4346,29443,29283,1981,47,4356,25092,29537,101,1989,36,4366,25603,27760,1989,38,4378,26627,25708,1989,40,4388,29445,24948,25972,1989,42,4398,15875,28265,1989,44,4410,29444,24944,110,1989,46,4420,25090,108,1908,32,4238,26626,63,1908,32,4442,25350,25465,25964,115,1908,68,4452,29442,112,1908,84,4466,29957,25971,16242,1908,72,4476,25355,27745,25193,24946,26996,28271,1981,5120,4488,29189,25697,30825,2187,2050,700,4432,26628,29285,101,2224,2050,700,4520,29443,16496,2236,2050,1940,700,4534,29443,8560,1946,1954,42,628,1919,571,700,4548,29219,16496,1954,40,601,1946,700,4568,29219,8560,463,346,1954,40,628,532,700,4584,26627,30821,1954,16,2187,2055,700,4604,25607,25445,28009,27745,1954,10,2187,2055,700,4620,23809,1924,2203,2055,700,4640,23361,1914,2203,2055,700,4652,28163,28777,346,571,700,4664,29700,25461,107,346,2004,700,4676,16132,30052,112,421,736,2353,421,700,4690,29218,64,463,463,2342,532,532,700,4708,29187,29807,532,346,463,346,700,4726,11524,28530,116,2366,2366,700,4742,12805,29284,28783,571,571,700,4756,12804,30052,112,2004,2004,700,4506,29444,25960,100,2366,571,700,4770,15617,955,901,700,4798,15362,62,2401,901,700,4808,12290,62,940,901,700,4820,12291,15932,901,901,700,4832,12291,15676,2413,901,700,4844,15361,2389,940,346,940,736,2461,736,2456,2389,1940,940,346,1940,940,736,2449,571,799,2454,736,2454,2382,1914,700,799,2459,2382,1924,700,799,2466,736,2466,2382,1914,700,2389,955,940,736,2482,346,1940,346,955,940,736,2480,1924,700,1914,700,2382,1914,700,4856,15873,346,2430,700,4970,12290,60,1914,2430,700,4980,12291,15678,2493,901,700,4992,15874,61,2430,901,700,5004,15362,61,2487,901,700,5016,29954,60,2389,2499,346,2499,2407,532,2430,463,2407,700,5028,29954,62,346,2517,700,5054,29955,15678,2517,901,700,5066,29955,15676,2530,901,700,5078,30470,29801,26984,110,2004,955,532,955,463,2517,700,5090,28166,26469,29793,101,1946,2015,700,5114,29443,25662,421,2493,700,5130,24835,29538,2568,736,2578,2562,700,5142,25348,27749,108,1908,2,5158,25349,27749,11116,2583,973,700,5170,25349,27749,29548,1900,700,5184,25349,27749,11628,2583,955,700,5196,25863,25976,30051,25972,2045,532,700,4784,16392,30821,25445,29813,101,2050,2610,700,5210,16165,30821,29801,736,2629,724,700,5244,27396,31077,63,1459,1924,601,2562,2568,736,2653,1954,6,2050,1954,8,2038,736,2650,124,571,1914,700,1924,700,5260,27395,31077,2081,2619,736,2658,700,5310,25860,26989,116,2075,2619,700,5326,25346,114,1954,13,2667,1954,10,2667,700,5340,26379,29797,25389,29301,25970,29806,2132,2050,700,5360,29451,29797,25389,29301,25970,29806,2132,2055,700,5226,27652,29537,116,2687,2050,700,5380,28676,25449,107,2270,973,601,700,5414,11010,33,2045,2342,601,973,346,628,700,5430,27654,26739,26217,116,2562,997,700,5450,25346,64,2061,346,1919,2038,736,2746,1954,8,997,700,1954,255,2038,700,5466,25346,33,346,1954,255,2038,421,1954,8,2730,2032,346,2342,2061,346,1919,2038,901,1954,255,2022,532,2004,2022,463,2038,2022,346,2055,700,5400,25347,11072,421,2736,700,5500,27907,30817,2389,2487,1126,700,5574,27907,28265,2389,2430,1126,700,5588,29449,30063,25458,11621,25705,1965,16,2050,700,5602,12802,33,2342,2055,2589,2055,700,5622,12802,64,421,2589,2050,346,2050,700,5638,12835,29246,463,346,532,346,532,532,700,5656,12835,15986,463,463,346,463,346,532,700,5562,29699,28789,1989,48,0,5676,29446,30063,25458,101,2851,2822,700,5708,24839,26988,28263,25701,421,1919,2038,2419,1919,2038,973,700,5724,24837,26988,28263,2264,2867,2224,2055,700,5750,24837,27756,29807,2224,2718,700,5768,11265,2879,2264,2055,2583,2888,700,5782,25346,44,2264,2753,1919,2888,700,5798,25349,30063,29806,421,1940,346,2736,700,5814,11015,29811,26994,26478,1919,2004,2797,2366,2004,973,2375,955,700,5696,11781,28005,29801,421,2219,1954,127,2550,1954,46,346,1126,2667,700,5832,29700,28793,101,1946,532,2911,2667,826,2951,571,700,5890,25349,28525,25974,1914,2790,532,799,2973,532,2784,2357,2753,1940,463,1940,826,2966,2382,700,5914,26116,27753,108,346,1914,2790,532,346,799,2991,2389,2753,1940,826,2988,2382,700,5954,25861,24946,25971,1914,2981,700,5860,25603,9327,2841,1900,421,2911,973,2867,2045,532,346,532,700,6004,10243,10532,3005,700,6032,11778,36,3005,2911,2949,700,5990,29445,24944,25955,2219,2667,700,6056,25349,29793,26723,2270,532,1965,10,2050,532,2287,1965,10,2055,2610,463,1965,10,2055,724,1914,700,6070,29701,29288,30575,2349,736,3077,1965,10,2050,2295,463,1965,10,2055,463,346,532,2277,463,700,6114,24837,28514,29810,1924,3061,700,6042,10247,25185,29295,10612,3005,346,736,3097,2911,2949,3082,571,700,6170,25605,28773,26740,1954,82,2050,2270,955,1946,700,6198,16134,25956,29808,104,3103,2505,1954,-4,2038,3061,700,6156,29955,11117,2389,973,532,2357,2499,532,2389,2038,2493,463,2032,532,2032,2493,463,2038,2562,463,346,700,6244,25607,25966,24935,25972,2015,532,2015,1919,3125,463,973,700,6290,25602,43,532,346,532,3125,463,973,463,973,700,6316,29955,10861,1914,346,1954,15,532,421,3125,2831,421,3125,463,973,463,736,3193,532,2004,3125,463,973,826,3178,2396,700,6340,10753,3173,571,700,6394,29958,12141,28525,100,2349,901,1954,-10,2038,3061,2389,2517,736,3255,2562,1954,15,532,532,421,3125,2831,421,3125,463,973,421,463,2357,346,532,3125,463,2419,346,2419,973,736,3248,532,571,1940,463,799,3249,571,463,826,3221,571,346,700,2382,571,1924,421,700,6404,27909,27951,25711,2568,421,532,736,3273,2562,532,3150,463,532,2568,736,3279,2357,973,463,3207,463,736,3287,346,2562,346,700,6520,12036,28525,100,2004,2493,346,3264,700,6576,27907,25711,3292,571,700,6594,12033,3292,2335,700,6220,10246,28005,29801,41,1459,694,700,6606,25860,26723,111,2088,2619,700,6616,29699,28769,421,3320,2004,2753,1940,700,6646,27396,24948,112,421,421,1954,13,2407,532,1954,10,2407,463,2038,736,3381,421,1954,8,2407,532,1954,127,2407,463,2038,736,3364,2219,3326,700,532,2004,2357,2430,421,736,3378,1954,8,421,3320,2219,3320,3320,463,973,700,571,2335,421,700,6632,24838,25443,28773,116,2004,973,2004,2389,2407,736,3413,2658,421,2219,955,1954,95,2517,736,3409,3326,799,3411,2102,2619,799,3393,571,2004,955,700,6770,25862,28792,25445,116,2110,2619,2214,2055,571,700,6834,29699,25193,2859,571,700,6856,28933,25973,31090,3431,1954,256,2110,2619,2851,2055,571,1914,2208,2055,700,6868,11529,29300,26977,26988,26478,532,799,3470,2219,2004,2357,973,2736,2430,736,3470,463,1940,700,826,3459,1914,700,6664,27652,28527,107,346,532,2375,421,736,3503,2004,2736,2357,955,2357,2219,2401,1954,4,2711,2610,736,3500,724,2396,700,2921,799,3481,724,2396,700,6948,29959,28014,29793,26723,736,3515,2413,700,2419,700,7012,27909,29793,26723,3511,2015,700,6900,28677,29281,25971,532,3431,2208,2050,973,2851,2050,2208,2050,955,2357,532,2004,463,346,2831,2357,1954,7022,3478,2389,463,1954,7042,3478,346,463,955,532,955,463,1940,2208,2718,463,2219,2401,736,3568,3456,1914,2790,700,7034,25094,28257,25966,114,532,421,2413,736,3586,2357,2667,1946,799,3577,571,724,700,7048,26628,27759,100,1924,2197,2718,2197,2050,2753,700,7178,8962,62,2382,2197,2050,2148,1954,896,973,2004,955,700,7142,25863,29816,24946,29795,421,532,3207,463,346,532,3207,463,2366,700,7226,25605,26473,29801,1954,9,2004,2430,1954,7,2038,973,1954,48,973,700,7200,8961,1929,3115,1914,2257,3618,3632,3593,700,7288,8962,115,3646,2389,2032,901,736,3657,700,7308,15362,35,2148,1954,896,973,2197,2055,700,7328,29444,26473,110,2499,2626,1954,45,3593,700,7348,29955,29230,532,1914,3667,3657,3603,463,2004,955,2219,3576,2949,700,7368,29954,46,3032,1914,3687,700,7256,10243,10542,2574,2257,1351,2349,736,3716,3709,3632,2667,700,7398,11777,3032,2568,736,3728,1954,45,2667,3709,700,7438,15879,30062,25197,29285,421,901,2626,2389,2831,571,2736,2257,532,1954,48,955,1954,9,2004,2430,736,3761,1954,7,955,421,1954,10,2430,2032,421,463,2517,901,736,3770,571,2841,700,346,2257,3173,571,2366,2257,3173,3161,2841,2921,421,901,736,3738,700,7460,28167,28021,25954,16242,1924,2192,2055,2257,532,2004,2736,1954,45,2401,421,532,736,3805,2921,2004,2736,1954,36,2401,736,3814,2305,2921,2831,1914,421,2841,3735,421,736,3846,2004,2736,1954,46,2407,736,3838,2396,2366,463,2382,1914,463,2187,2055,700,1946,2192,2055,1940,2192,2050,799,3818,2382,463,736,3851,3150,463,2187,2055,1924,700,7570,11778,115,3103,532,799,3866,2357,2711,3721,826,3863,700,7712,25351,28015,24944,25970,2366,2004,955,2349,736,3885,532,2382,463,2335,700,532,799,3900,2911,2366,2911,2366,955,2349,736,3900,724,2335,2335,700,826,3888,2382,1914,700,7738,28163,24934,2589,700,7810,25347,24934,3908,2784,1954,31,2038,973,2589,1935,2038,700,7412,10248,25971,29281,26723,41,346,532,421,421,736,3964,421,3908,2911,1954,159,2038,2357,2911,3874,901,736,3960,724,421,3908,1954,64,346,2050,2038,2419,1919,2032,2562,700,2335,2061,799,3932,724,2382,1914,700,7846,10246,26982,25710,41,532,2170,2061,736,3994,2061,2050,2357,346,3929,2349,736,3991,532,2396,463,724,700,2589,799,3975,571,1914,463,1914,700,7820,29455,24933,25458,11624,28535,25714,26988,29811,3929,2396,700,7998,26116,28265,100,3973,2396,700,8022,25383,28015,26992,25964,463,421,601,2893,1940,532,700,7936,10249,26988,25972,24946,10604,2203,2050,736,4043,4023,1954,2893,700,8036,27719,29801,29285,27745,2096,2619,700,8088,25352,28015,26992,25964,44,2045,2893,700,8060,16134,28518,28277,100,2626,3032,2911,2949,1954,63,2667,2673,1954,-13,3061,700,8104,26889,29806,29285,29296,29797,4015,2349,736,4116,2203,2050,736,4101,2413,736,4098,3913,2610,700,3913,4058,700,571,421,3908,2736,1954,32,2038,2419,1954,-14,2038,3061,3913,2610,700,421,532,2911,3790,736,4139,724,2192,2050,2493,736,4131,571,799,4137,2203,2050,736,4136,346,4049,4049,700,463,1914,4066,700,8156,26377,29797,28461,25714,29285,2170,1914,532,2061,2357,2022,736,4160,2589,799,4152,724,421,2602,346,2170,955,2045,421,532,1946,2568,1954,-50,2038,3061,532,799,4181,2061,346,2602,826,4178,2050,463,700,0,29449,29797,28461,25714,29285,421,1924,2401,736,4202,571,2141,1919,4192,700,421,2163,2487,1954,-49,2038,3061,2170,346,532,799,4217,2342,2055,2589,826,4214,1914,346,2055,700,8286,10247,29295,25956,10610,421,736,4245,1946,346,532,4228,2004,2357,2022,736,4244,1940,463,2375,700,724,700,8446,11526,29295,25956,114,4149,4228,2335,4192,700,8492,11014,29295,25956,114,421,532,4251,4149,463,346,1940,4192,700,8372,26126,29295,26740,30509,29295,27748,29545,116,1908,56,8540,29446,29561,25972,109,1908,62,8562,26117,29295,26740,2141,4279,1929,4192,700,8576,28420,27758,121,1924,4192,700,8122,11779,25705,3908,2911,1954,31,2038,2949,3032,700,8594,30469,29295,29540,2673,4149,2349,736,4346,346,2050,2349,736,4343,421,3908,2736,1954,128,2038,901,736,4340,421,4307,2050,799,4326,1946,799,4321,700,8512,25611,26213,28265,29801,28521,29550,2170,2050,2697,700,8694,30468,29295,100,1919,3115,3528,2264,2867,421,532,2389,2055,1940,346,2961,463,700,8608,29701,27503,28261,2219,4362,700,8752,16135,28277,29033,25973,421,2687,3929,901,2626,3032,2382,1954,66,2050,4307,3024,29193,25701,26213,28265,25701,2673,700,8766,16132,30062,108,2784,2626,1954,-16,3061,700,8814,16132,25964,110,2784,1954,31,2487,1954,-19,2038,3061,700,8716,25348,24936,114,4380,4411,2911,571,2736,700,8860,23366,26723,29281,93,4434,4023,1954,2893,700,8880,15201,1954,-13570,2407,1954,-22,2038,3061,1954,700,2893,2328,2349,736,4468,2687,2055,700,8900,14849,2879,2264,421,1954,66,2055,2704,2893,4380,4411,4421,4388,2911,973,2224,2055,2879,1954,-13570,2322,700,8938,14855,28526,24942,25965,2879,2264,1914,1954,-13570,2322,700,8984,10049,4380,4015,4066,3913,4049,700,9008,29287,25445,29301,25971,1954,66,2050,3913,4058,700,8834,29702,26479,27751,101,2342,2050,2022,346,2055,700,9046,26628,25705,101,4380,4015,4066,3908,1954,128,346,4528,700,9068,27940,29281,107,2264,1914,2893,700,9024,25189,26469,28265,2264,700,9110,26978,102,1954,736,2893,4551,700,9122,30053,29806,27753,2045,4564,2055,700,9138,24933,24935,28265,1954,799,2893,4058,700,9154,29796,25960,110,2264,2045,346,2055,700,9172,30565,26984,25964,4564,700,9190,29286,28773,24933,116,346,4581,4590,700,9202,25956,29548,101,1954,799,2893,4551,346,4590,700,9220,26211,29295,1954,532,2893,2264,700,9242,24931,29798,571,1954,799,2893,4551,2264,346,700,9258,28260,30821,116,1954,826,2893,4058,700,9094,10280,24941,27506,29285,41,463,1900,2061,2224,2055,2589,2050,2687,2055,700,9280,25350,25970,29793,101,2203,2050,532,4471,571,463,2203,2055,4023,1981,2687,2055,700,9330,30216,29281,24937,27746,101,4670,1914,2893,700,9366,25352,28271,29811,28257,116,4670,1935,2888,4023,1908,2893,700,9386,29956,25971,114,4670,1935,2888,4023,1989,2583,2242,2718,2242,2050,2893,700,9412,15877,28514,31076,2589,700,9298,10278,28516,29541,41,2841,1900,346,532,700,9456,10278,28515,28781,41,463,1954,66,2050,3913,2061,1954,1981,2407,1954,-31,2038,3061,2055,700,9444,25701,25967,15987,4023,4743,4023,4733,700,9516,27910,29281,25963,114,2704,2879,2264,4670,1935,2888,4023,4655,2893,2893,700,9534,15970,114,4023,532,700,9566,29282,62,4023,463,700,9578,29285,29284,28783,4023,724,700,9590,25956,27000,116,4023,700,700,9476,10243,10611,2879,1954,34,4362,2911,2335,1940,2888,2879,700,9604,11874,34,4023,3024,4812,700,9644,9314,34,4023,3019,4812,700,9658,24934,28514,29810,34,4023,3090,4812,700,9672,10305,1954,41,3528,2382,700,9690,11842,40,1954,41,3528,2949,700,9704,23617,3431,2050,2208,2055,700,9720,28744,29551,28788,28271,101,4380,4015,4066,3913,4058,700,9618,10245,26222,10593,2704,3908,4528,700,9734,26889,28013,25701,24937,25972,1954,64,4883,700,9774,25356,28015,26992,25964,28461,27758,121,1954,32,4883,700,9794,29443,25957,4380,4015,4066,2673,2061,1954,700,2407,736,4934,2061,3721,2589,2264,2004,2430,736,4932,571,700,799,4916,2050,3702,700,9818,25604,28021,112,2867,2349,736,4953,346,2061,3721,2589,346,2602,799,4942,571,700,9758,25349,29547,28021,2867,421,1954,-16162,955,532,2349,736,4978,346,2061,463,973,532,2589,346,2602,799,4965,571,463,700,9874,25607,26213,28265,25701,4380,4015,2335,2419,700,9962,23366,26740,28261,93,700,9982,23366,27749,25971,93,4380,2784,736,5021,4015,571,3913,421,1954,10004,2401,346,1954,9992,2401,2032,2626,799,5002,3438,571,799,5002,700,9994,23364,26217,93,2626,5002,700,10052,27906,115,532,1459,2251,2050,532,826,5041,826,5037,700,10066,25092,27749,108,1954,7,2667,700,9910,25347,26995,1954,27,2667,1954,91,2667,700,10092,28676,26465,101,5057,3024,12802,74,5057,3024,12548,12603,72,700,10128,24837,11636,31096,2257,2315,532,5057,1914,3687,3024,15105,1914,3687,3024,18433,463,2187,2055,700,10156,25093,25135,26229,1908,1024,10108,15367,27746,25455,15979,1981,10298,10208,25092,26229,48,1908,-3072,10222,25606,29289,31092,48,1981,0,10234,25092,27500,48,1981,-1,10248,15877,25697,29284,421,1919,2038,2419,1954,-9,2038,3061,2045,700,10260,10247,27746,25455,10603,1459,532,5134,346,5134,346,463,5134,532,799,5168,2389,601,346,628,1940,346,1940,346,826,5160,2382,700,10288,30214,27745,25705,63,421,1919,1954,128,2550,700,10344,29704,24946,29550,25958,114,5109,2050,2610,700,10366,15876,27746,107,1946,5102,3199,700,10386,25349,25964,28257,1914,5122,2055,700,10402,26890,30318,27745,25705,29793,101,1924,5128,2055,700,10418,25092,30064,116,5177,736,5232,5197,5115,5102,5189,700,571,700,10440,25092,25959,116,5177,736,5247,5197,5115,346,5102,5189,700,571,700,10468,27655,24943,25956,16228,421,5128,2050,2401,700,10196,29958,25712,29793,101,1924,5122,2055,700,10518,29452,30305,11621,30050,26214,29285,115,5122,2050,736,5284,5128,2050,5224,5205,700,10536,26117,30060,26739,5276,5216,700,10570,25869,28781,31092,25133,26229,25958,29554,5205,5216,700,10584,25094,26229,25958,114,1919,3115,5177,901,1954,-35,2038,3061,5254,736,5322,571,5115,700,5276,5128,2055,5115,700,10606,25093,28524,27491,5254,736,5337,571,5115,700,421,5308,346,5238,700,10654,25093,24940,27502,2219,2981,700,10684,27652,29545,116,5068,2673,421,532,5331,1954,15,532,1954,15,2357,955,1954,3,3687,3032,1954,63,532,2911,2934,826,5372,2673,826,5361,571,463,2181,2055,700,10698,26377,29797,26925,28782,29813,2859,2208,2050,2807,2068,2050,700,10768,29449,29797,26925,28782,29813,2068,2055,1965,16,2055,2208,2055,2851,2814,700,10498,28418,107,2203,2050,2626,3024,8195,27503,2673,700,10826,25860,24950,108,4380,2784,736,5437,4084,1914,3115,799,5428,571,2068,2619,700,10794,25864,24950,30060,29793,101,5390,2831,2831,532,1914,1924,1954,3998,5403,1954,10856,3039,463,2841,2841,5403,3061,700,10848,27652,28265,101,1954,6,2730,346,5331,973,1954,64,700,10930,27656,24943,27748,28265,101,5469,5447,700,10882,27652,24943,100,2176,2050,532,421,2176,2055,1914,1954,15,532,2389,2831,5484,2841,1940,826,5501,2382,463,2176,2055,700,8630,25862,28518,29810,104,1908,-1,10956,26884,26222,111,2673,3024,25883,28486,29810,8296,22646,22574,8236,30032,27746,25449,17440,28015,26977,11374,2264,3721,2673,3024,21033,25449,24936,25714,18976,28001,29541,18464,30575,11365,26656,30575,11877,11890,11882,14648,26432,24941,27753,25390,28015,2673,3024,26656,29812,29552,12090,26415,29801,30056,11874,28515,12141,28520,25975,27250,29487,25205,25964,113,2673,700,11040,30723,28521,1954,6780,2110,2055,2102,2055,2088,2055,2068,2055,700,11172,26628,28257,100,1954,10832,1954,6626,1954,6,2050,1919,2038,736,5618,571,1954,3700,1954,6672,2328,5589,700,11200,28676,25441,101,1954,11,2667,700,11246,26116,27753,101,1954,11254,1954,3700,1954,6672,5589,700,11262,25351,28271,28531,25964,1954,5268,2081,2055,1954,6626,2075,2055,5604,700,11286,26883,8559,5648,700,11316,29705,29537,11627,28265,29801,1954,34,2050,346,1954,34,2055,2148,2045,1965,0,2055,1954,3678,2045,1965,2,2055,2148,1954,256,973,2045,1965,6,2055,2148,1954,512,973,2045,1965,8,2055,1914,1965,4,2055,2315,5661,1954,8072,2096,2055,1954,3678,2117,2055,1914,2208,2055,1924,2192,2055,2148,1954,512,973,1914,2851,2814,1954,34,2055,700,11326,26883,26990,1954,34,2050,5669,700,11468,10247,29285,28530,10610,421,3032,3721,1954,63,2667,2673,1924,2401,736,5759,124,5737,1954,11494,2117,2055,700,10974,28932,26997,116,1954,11494,2117,2055,3438,1954,10856,3039,2349,736,5782,2117,2619,799,5773,700,11484,10246,28515,25708,41,4292,4354,5737,1954,6,2050,1954,4,2038,736,5802,5524,1954,6,2050,1929,2038,736,5839,1954,8,2050,1900,421,2264,346,955,4959,1954,36,2050,2407,736,5831,3024,25097,25697,25376,29547,28021,124,1954,6,2050,1929,2022,1954,6,2055,5769,700,11570,29701,29537,14955,4670,2264,5102,2888,2045,5669,700,11682,24840,29795,30313,29793,101,421,5669,421,532,346,2045,346,1954,2,973,2055,463,2148,2050,532,421,2045,2148,2055,463,346,2055,700,11704,30468,26977,116,1459,2061,736,5885,1914,346,2055,700,11762,29446,26473,24942,108,2148,346,2055,700,11786,29446,28265,27751,101,1919,1954,70,2055,700,11804,27909,27765,26996,1914,1954,70,2055,700,11824,29444,28261,100,2148,2004,1954,12,973,1459,2061,901,736,5930,2055,1954,14,973,2055,700,11842,29191,25445,26981,25974,1459,1965,12,2050,736,5946,1965,14,2050,1965,12,2050,1914,1965,12,2055,700,11530,25862,26980,28532,114,1954,58,4261,700,0,28929,1954,58,4251,700,11944,16129,2181,2050,3721,700,11956,27649,2181,2050,5353,700,11968,30721,5974,2181,2050,5491,5968,700,11980,26882,97,1929,3115,1954,6,2730,973,2181,2050,5331,973,3431,2208,2050,973,346,2859,2335,2208,2050,955,2961,3431,2050,2208,2055,5986,700,11996,24833,1914,346,6001,700,12056,30465,4149,1954,58,1919,4192,4319,4192,700,12068,29441,5264,5289,700,12088,28161,1919,2181,2718,5986,700,12098,28673,1924,2181,2718,5986,700,12112,29185,2181,2055,5986,700,12126,31233,2181,2050,5331,5102,5346,5986,700,12138,25601,1919,3115,532,2181,2050,5331,463,1954,6,2730,973,1954,64,5346,5986,700,11926,25348,27759,100,1954,64,1900,2619,700," prog.c -o prog

For a program that halts, prints "Hi" (**with no newline**) and finally for
a program that implements a fully featured Forth interpreter. A bit of a step
change in terms of size and functionality, I certainly do not recommend typing
out the final command out manually.

# RUNNING

Let's assume you've chosen to run the Forth program, like so:

	./prog

Then typing "words" will vomit out a list of defined Forth functions.

Hitting (or gently pressing, depending on your relationship with your
computer) CTRL-D (or CTRL-Z on *certain* systems) will exit the interpreter
bring you back to reality.

The following code should also work:

	: ahoy cr ." Ahoy, there!" ;
	ahoy

As will:

	2 2 + . cr

# PORTABILITY AND BUGS

This program has been tested under a 64-bit Linux, using GCC and TCC,
specifically:

* gcc (Ubuntu 9.4.0-1ubuntu1~20.04.2) 9.4.0
* tcc version 0.9.27 (x86_64 Linux)

You might have problems specifying the (larger) programs on the command
line depending on the whims of your operating system and shell providers.

"short" must be a 16-bits, and twos complement is assumed. I'd also
specify "-fwrapv" so the compiler doesn't get its own ideas about what
it can do with our signed integers. More accurately, "short" must be
used for SUBLEQ programs that expect the SUBLEQ machine to have a word
size of 16-bits, not all programs require this, but the most interesting
one (the Forth interpreter) currently does.

A number of warnings are present in the C file that are both trivial
to correct and increase the size of the entry by an amount that is
not worth correcting them by.

# OTHER CANDIDATES

In the process of making this entry there were many potential candidates, 
we can go over some of them (they have been formatted for easier reading,
but they fit on one line unless otherwise stated). Just imagine they did
not make the cut in a Battle Royale/Hunger Games like scenario.

This version uses recursion instead of looping and requires Tail Call
Optimization to be performed by your compiler if you want to run programs
for more cycles than your stack size:

	short s[8<<13]={u},b,l,e,q;f(){
	q=s[b=s[e++]],l=s[e],e+=2;
	~b?~l?e=(s[l]-=q)>0?e:s[e-1]:putchar(q):(s[l]=getchar());
	~e?f():0;
	}main(){f();}

That candidate was rejected because of the TCO requirement, but also
because it is larger at 137 bytes (when formatted on a single line).

This version specifies the program via the command line, at over
160 bytes it is unfortunately simply too large.

	main(p,y)char**y;{short m[p*9],a,b,A;
	for(;--p;)m[p-1]=atoi(y[p]);
	for(;~p;){
	A=m[a=m[p++]],b=m[p],p+=2;
	~a?~b?p=(m[b]-=A)>0?p:m[p-1]:putchar(A):(m[b]=getchar());
	}}

Note that the size of the memory is specified as a VLA which saves
a few bytes and provides memory proportional to the program size
(which works for the Forth image).

This candidate uses "read" instead of "getchar", and multi-character
constants to specify the array size.

	short s['zz']={u},b,l,e;main(q){
	for(;~e;){
	q=s[b=s[e++]],l=s[e],e+=2;
	~b?~l?e=(s[l]-=q)>0?e:s[e-1]:putchar(q):read(0,s+l,1);
	}}

This is shorter than using "getchar", but does change how the program
works as EOF is no longer passed to the program. It is also less 
portable, creating a dependency on the machines endianess.

And the final candidate is not actually a one-liner, but a two-liner
(when the whitespace that can be removed is removed then two lines are
left):

	#include<stdio.h>
	short m[1<<16],*_=m,a,b;main(p,y)char**y;{
	for(FILE*f=fopen(y[1],"r");fscanf(f,"%hd,",_++)>0;);
	for(_=m;_-m>=0;){
	a=*_++,b=*_,_+=2;
	a+1?b+1?_=(m[b]-=m[a])>0?_:m+_[-1]:putchar(m[a]):(m[b]=getchar());
	}}

This specifies the program to be run in a space delimited file. It
is simply too big. There are a few space saving measures used in
the other candidates that could be implemented, but the "fscanf" loop
that loads the program is simply too large.

# SPOILERS

This program implements a 16-bit Single Instruction Set Computer which
is then passed a program that implements a fully featured Forth program
using the instruction SUBLEQ. All operations are implemented using that
single instruction. This instruction has been known as the Ultimate RISC,
you aren't going to reduce the instruction count any further than this!

The instruction does the following:

	while pc != -1:
		a = memory[pc + 0]
		b = memory[pc + 1]
		c = memory[pc + 2]
		pc = pc + 3
		if (a == -1)
			output_octet(memory[b])
		else if (b == -1)
			m[a] = input_octet()
		else
			m[b] = m[b] - m[a]
			if (m[b] <= 0)
				pc = c

- "pc" is our Program Counter
- "memory" is initialized with our program, and contains
at least 65536 cells.
- All values are 16-bit, signed, twos compliment

You will note that is no AND, OR, XOR, Shifting (right or otherwise), 
multiplication, division, byte loading or storing, indirection,
function calls or returns, addition, or unconditional jumps. There
are often minor variations that you see in the wild (such as halting
when the program counter is negative and not -1, or using 32-bit
integers instead of 16-bit ones).

The machine does generously provide us with:

* Input
* Output
* A way to halt
* A Turing complete instruction (modulo the usual caveats)

Using these stone-knives and bear skins it is possible to implement
a virtual machine upon which we can implement our Forth.

How can we then implement the usual suspects, instruction wise?

* Self-modifying code is not disallowed, using this fact
it is possible to implement indirect stores/loads and jumps and
even just an equivalent to MOV.
* Addition can be implemented by negating and subtracting.
* Unconditional jumps can be implemented with a conditional jump
that always succeeds.
* Multiplication is repeated addition.
* Division is repeated subtraction.
* Left shifting is repeated addition of a value to itself.
* Right shifting is more tricky.
* The comparison operators are actually quite tricky to get
right, the most difficult out of all the operators, especially
unsigned less/more-than, not the bitwise operators. The main
difficult is that the comparison does not compare if one number
is less than another arbitrary number, but if one number is
less than or equal to zero. This can be corrected for, but it
is easy to make a comparison operator that does not work for
the entire range of numbers.
* Incriminating and decrementing can be achieved by subtracting
a constant, or a memory address containing a value treated as
such, from a value.
* Bitwise negation, the only bitwise operator that can be
trivially implemented, is done so by taking advantage of the
fact that twos compliment subtraction is equivalent to adding 
the negation of subtrahend (I had to Google that word) and 
adjusting by one. 
* Stacks can be implemented with indirect loads and stores,
along with increments and decrements for the stack pointers.
* AND, OR, XOR can be implemented via two methods; either by
using division (or the remainder from performing a division by
two) to determine the lowest bit, or more efficiently by checking
whether a value is negative (using the built in Less Than Or
Equal To Zero check, and rechecking to make sure the value is not
actually zero). Once you can determine one bit in a number you can
make decisions based off on that, you can also shift bits into that
top bit by adding the value to itself.

With all of these it becomes possible to implement a Forth
interpreter and program more comfortably. It is even possible to
implement a primitive cooperative multithreading model for the
Forth...because I implemented one!

This Forth is self-hosting, that is, you can feed the interpreter
the Forth code use to generate the Forth image and get a new image
back.
